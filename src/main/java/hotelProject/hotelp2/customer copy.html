<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Page</title>
    <link rel="stylesheet" href="employeeS.css">
</head>

<body>
    <nav>
        <ul>
            <li><a href="homepage.html">About</a></li>
            <li><a href="#services">Services</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
    <form id="addCustomerForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="address">Address:</label>
        <input type="text" id="address" name="address" required><br><br>
        <label for="custIDType">Type of ID:</label>
        <select id="custIDType" name="custIDType">
            <option value="SSN">SSN</option>
            <option value="SIN">SIN</option>
            <option value="Driving License">Driving License</option>
        </select><br><br>
        <label for="eID">Enter ID:</label>
        <input type="text" id="eID" name="eID" required><br><br>
        <label for="RegDate">Registration Date:</label>
        <input type="date" id="RegDate" name="RegDate" required><br><br>

        <button type="submit">Add Customer</button>
    </form>

    <h2>Customer List</h2>
    <ul id="customerList"></ul>
    <footer>
        <p>&copy; 2024 HotelAppInc. All rights reserved.</p>
    </footer>
    <script>
        function getCustomerListFromStorage() {
            const storedCustomers = localStorage.getItem("customers");
            return storedCustomers ? JSON.parse(storedCustomers) : [];
        }

        function saveCustomerListToStorage(customers) {
            localStorage.setItem("customers", JSON.stringify(customers));
        }

        let customers = getCustomerListFromStorage();
        function displayCustomers() {
            const customerList = document.getElementById("customerList");
            customerList.innerHTML = "";
            customers.forEach((customer, index) => {
                const li = document.createElement("li");
                li.textContent = `Name: ${customer.name}, Address: ${customer.address}, ID type: ${customer.custIDType},ID: ${customer.eID},Date: ${customer.RegDate}`;
                const editButton = document.createElement("button");
                editButton.textContent = "Edit";
                editButton.addEventListener("click", () => editCustomer(index));
                const deleteButton = document.createElement("button");
                deleteButton.textContent = "Delete";
                deleteButton.addEventListener("click", () => deleteCustomer(index));
                li.appendChild(editButton);
                li.appendChild(deleteButton);
                customerList.appendChild(li);
            });
        }
        function addCustomer(event) {
            event.preventDefault();
            const form = event.target;
            const name = form.elements.name.value;
            const address = form.elements.address.value;
            const custIDType = form.elements.custIDType.value;
            const eID = form.elements.eID.value;
            const RegDate = form.elements.RegDate.value;
            customers.push({ name, address, custIDType, eID, RegDate});
            saveCustomerListToStorage(customers);
            displayCustomers();
            form.reset();
        }

        function editCustomer(index) {
            const newName = prompt("Enter new name:");
            if (newName !== null && newName !== "") {
                customers[index].name = newName;
                saveCustomerListToStorage(customers);
                displayCustomers();
            }
        }
        function deleteCustomer(index) {
            if (confirm("Are you sure you want to delete this customer?")) {
                customers.splice(index, 1);
                saveCustomerListToStorage(customers);
                displayCustomers();
            }
        }
        document.getElementById("addCustomerForm").addEventListener("submit", addCustomer);
        displayCustomers();
    </script>
</body>

</html>